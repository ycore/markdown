{"version":3,"file":"index.js","sources":["../src/markdown-config.ts","../src/components.tsx","../src/markdown-utils.ts","../src/markdown-data.ts"],"sourcesContent":["// Central configuration for all markdown defaults and asset paths\nexport const MARKDOWN_CONFIG = {\n  EXTENSION: '.md',\n  CHUNK_BY_FOLDER: true,\n  INCREMENTAL_BY_FOLDER: false,\n  PREFIX: 'markdown',\n  PURIFY_HTML: true,\n  UPDATE_DATE: true,\n  COMPRESS: true,\n  CONCURRENCY: {\n    FOLDERS: 5,\n    FILES: 10,\n  },\n  CACHE: {\n    MAX_AGE: 3600, // 1 hour default\n  },\n} as const;\n\n// Central configuration for asset prefixes - change these to modify where markdown assets are stored/fetched\nexport const ASSET_PREFIX = {\n  build: '/assets/docs', // Where assets are written during build (relative to /public)\n  fetch: '/assets/docs', // URL prefix for fetching assets at runtime\n} as const;\n\nexport const ASSET_ROUTES = {\n  docs: (slug: string) => `/markdown/docs/${slug}`,\n  docsApi: (slug: string) => `/markdown/docs/${slug}?api`,\n};\n\n// DOMPurify configuration for markdown content\nexport const DOMPURIFY_CONFIG = {\n  ALLOWED_TAGS: [\n    'h1',\n    'h2',\n    'h3',\n    'h4',\n    'h5',\n    'h6',\n    'p',\n    'br',\n    'strong',\n    'em',\n    'u',\n    's',\n    'del',\n    'a',\n    'img',\n    'ul',\n    'ol',\n    'li',\n    'blockquote',\n    'pre',\n    'code',\n    'table',\n    'thead',\n    'tbody',\n    'tr',\n    'th',\n    'td',\n    'hr',\n    'div',\n    'span',\n  ] as string[],\n  ALLOWED_ATTR: ['href', 'title', 'alt', 'src', 'class', 'id', 'start', 'type', 'colspan', 'rowspan', 'datetime', 'scope', 'data-*'] as string[],\n  FORBID_TAGS: ['script', 'object', 'embed', 'form', 'input', 'button', 'iframe', 'frame', 'frameset', 'noframes'] as string[],\n  FORBID_ATTR: ['style', 'on*'] as string[],\n  KEEP_CONTENT: true,\n  ALLOW_DATA_ATTR: false,\n};\n\n// Shiki highlighter configuration\nexport const HIGHLIGHTER_CONFIG = {\n  LANGS: ['bash', 'css', 'html', 'javascript', 'json', 'markdown', 'sql', 'text', 'ts', 'tsx', 'typescript', 'xml', 'yaml'] as string[],\n  THEMES: ['night-owl'] as string[],\n};\n","/** biome-ignore-all lint/a11y/noSvgWithoutTitle: acceptable */\nimport { SpriteIcon } from '@ycore/componentry/images';\nimport { LoadingBar } from '@ycore/componentry/impetus';\nimport { ThemeSwitch } from '@ycore/componentry/impetus/theme';\nimport { type IconName, Link } from '@ycore/componentry/vibrant';\nimport clsx from 'clsx';\nimport { memo, useCallback, useEffect, useState } from 'react';\nimport { useFetcher, useLocation, useNavigate } from 'react-router';\nimport type { DocContent, EnhancedMarkdownMeta, MarkdownPageData, MarkdownPageProps, MarkdownProps } from './@types/markdown.types';\nimport { ASSET_ROUTES } from './markdown-config';\n\n// ============================================================================\n// CORE MARKDOWN RENDERER COMPONENT\n// ============================================================================\n\n/**\n * Simple markdown content renderer component\n * Renders pre-sanitized HTML content from markdown processing\n */\nexport function MarkdownRenderer({ children, className = '' }: MarkdownProps): React.JSX.Element {\n  if (!children || typeof children !== 'string') {\n    return <div className={className} />;\n  }\n\n  // biome-ignore lint/security/noDangerouslySetInnerHtml: Content is pre-sanitized at build time\n  return <div className={className} dangerouslySetInnerHTML={{ __html: children }} />;\n}\n\n// ============================================================================\n// MAIN DOCUMENTATION PAGE COMPONENT\n// ============================================================================\n\n// Type guards\nconst isDocContent = (data: unknown): data is DocContent => {\n  return typeof data === 'object' && data !== null && 'content' in data && 'frontmatter' in data && 'slug' in data;\n};\n\nconst isMarkdownPageData = (data: unknown): data is MarkdownPageData => {\n  return typeof data === 'object' && data !== null && 'manifest' in data;\n};\n\n/**\n * Main documentation page component with sidebar navigation and document viewer\n */\nexport function MarkdownPage({ loaderData, spriteUrl }: MarkdownPageProps): React.JSX.Element {\n  // Handle both data structures: array of docs or structured page data\n  const pageData = isMarkdownPageData(loaderData) ? loaderData : { manifest: loaderData, selectedDoc: undefined, document: undefined };\n  const { manifest: docs, selectedDoc: preloadedDoc, document: preloadedDocument, loading: serverLoading } = pageData;\n\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [selectedDoc, setSelectedDoc] = useState<string | null>(preloadedDoc || null);\n  const [error, setError] = useState<string | null>(null);\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\n  const fetcher = useFetcher();\n\n  const handleDocSelect = useCallback(\n    (slug: string) => {\n      if (selectedDoc === slug) return;\n      navigate(ASSET_ROUTES.docs(slug));\n    },\n    [selectedDoc, navigate]\n  );\n\n  // Initialize selected doc from URL path or preloaded data\n  useEffect(() => {\n    if (preloadedDoc && preloadedDoc !== selectedDoc) {\n      setSelectedDoc(preloadedDoc);\n      setError(null);\n    } else {\n      // Extract slug from URL path: /markdown/docs/some/nested/path -> some/nested/path\n      const pathParts = location.pathname.split('/');\n      const docsIndex = pathParts.indexOf('docs');\n      if (docsIndex !== -1 && docsIndex < pathParts.length - 1) {\n        const slug = pathParts.slice(docsIndex + 1).join('/');\n        if (slug && docs.find((doc: EnhancedMarkdownMeta) => doc.slug === slug) && selectedDoc !== slug) {\n          setSelectedDoc(slug);\n          // Only fetch if we don't have preloaded document data\n          if (!preloadedDocument || preloadedDoc !== slug) {\n            fetcher.load(ASSET_ROUTES.docsApi(slug));\n          }\n        }\n      } else if (selectedDoc && !preloadedDoc) {\n        // No slug in path, clear selection\n        setSelectedDoc(null);\n        setError(null);\n      }\n    }\n  }, [docs, fetcher.load, selectedDoc, location.pathname, preloadedDoc, preloadedDocument]);\n\n  // Handle fetch errors\n  useEffect(() => {\n    if (fetcher.state === 'idle' && fetcher.data && !isDocContent(fetcher.data)) {\n      setError('Failed to load document');\n    }\n  }, [fetcher.state, fetcher.data]);\n\n  // Determine current document: preloaded document, fetched document, or none\n  const currentDoc =\n    preloadedDocument && preloadedDoc === selectedDoc ? { content: preloadedDocument.content, frontmatter: preloadedDocument.frontmatter, slug: selectedDoc } : isDocContent(fetcher.data) ? fetcher.data : undefined;\n\n  return (\n    <div className=\"min-h-screen bg-white transition-colors dark:bg-gray-900\">\n      <div className=\"flex\">\n        {/* Sidebar */}\n        <aside\n          className={`fixed inset-y-0 top-0 left-0 z-20 flex w-80 flex-col border-gray-200 border-r bg-white transition-transform duration-300 dark:border-gray-800 dark:bg-gray-900 ${sidebarCollapsed ? '-translate-x-full' : 'translate-x-0'}`}\n        >\n          {/* Scrollable navigation area */}\n          <div className=\"flex-1 overflow-y-auto p-6 pb-20\">\n            <div className=\"mb-6 flex items-center justify-between\">\n              <h2 className=\"font-semibold text-gray-900 text-lg dark:text-white\">Documentation</h2>\n              <div>\n                <button type=\"button\" onClick={() => setSidebarCollapsed(!sidebarCollapsed)} className=\"rounded-md p-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\">\n                  <SpriteIcon<IconName> spriteUrl={spriteUrl} iconId=\"ChevronLeft\" className=\"h-5 w-5\" />\n                </button>\n              </div>\n            </div>\n            <nav className=\"space-y-1\" aria-label=\"Documentation navigation\">\n              {docs.length === 0 ? <DocListEmpty /> : <DocList docs={docs} selectedDoc={selectedDoc} onDocSelect={handleDocSelect} spriteUrl={spriteUrl} />}\n            </nav>\n          </div>\n\n          {/* Sticky footer */}\n          <div className=\"border-gray-200/50 border-t p-4 backdrop-blur-sm dark:border-gray-800/50\">\n            <div className=\"flex items-center justify-end gap-x-3\">\n              <Link href=\"/\">\n                <SpriteIcon<IconName> spriteUrl={spriteUrl} iconId=\"House\" className=\"size-5 text-accent-foreground transition-colors hover:text-accent-foreground/80\" viewBox=\"0 0 24 24\" />\n              </Link>\n              <ThemeSwitch spriteUrl={spriteUrl} />\n            </div>\n          </div>\n        </aside>\n\n        {/* Sidebar toggle button - visible when sidebar is collapsed */}\n        <button\n          type=\"button\"\n          onClick={() => setSidebarCollapsed(false)}\n          className={`fixed top-4 left-4 z-30 rounded-md border border-gray-200 bg-white p-2 text-gray-500 shadow-sm transition-opacity duration-300 hover:text-gray-700 dark:border-gray-800 dark:bg-gray-900 dark:text-gray-400 dark:hover:text-gray-200 ${sidebarCollapsed ? 'opacity-100' : 'pointer-events-none opacity-0'}`}\n        >\n          <SpriteIcon<IconName> spriteUrl={spriteUrl} iconId=\"EllipsisVertical\" className=\"h-5 w-5\" />\n        </button>\n\n        {/* Main content */}\n        <main className={`flex-1 transition-all duration-300 ${sidebarCollapsed ? 'pl-0' : 'pl-64'} min-w-0`}>\n          <div className=\"mx-auto min-w-0 max-w-4xl px-4 md:px-8\">\n            {!selectedDoc ? (\n              <div className=\"flex h-96 items-center justify-center\">\n                <div className=\"text-center\">\n                  <div className=\"mb-4 text-gray-400 dark:text-gray-500\">\n                    <SpriteIcon<IconName> spriteUrl={spriteUrl} iconId=\"CircleAlert\" className=\"h-8 w-8\" />\n                  </div>\n                  <h3 className=\"mb-2 font-medium text-gray-900 text-lg dark:text-white\">Select a document</h3>\n                  <p className=\"text-gray-500 dark:text-gray-400\">Choose a document from the sidebar to view its content.</p>\n                </div>\n              </div>\n            ) : fetcher.state === 'loading' || serverLoading || (selectedDoc && !currentDoc && !error) ? (\n              <LoadingBar />\n            ) : error ? (\n              <DocumentNotFound spriteUrl={spriteUrl} />\n            ) : currentDoc ? (\n              <article className=\"markdown-content min-w-0 py-8 md:py-12\">\n                <DocumentHeader frontmatter={currentDoc.frontmatter} />\n                <MarkdownRenderer className=\"min-w-0 max-w-none\">{currentDoc.content}</MarkdownRenderer>\n              </article>\n            ) : (\n              <DocumentNotFound spriteUrl={spriteUrl} />\n            )}\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n}\n\n// ============================================================================\n// SUPPORTING UI COMPONENTS\n// ============================================================================\n\nconst DocListEmpty = () => {\n  return <p className=\"text-gray-500 text-sm dark:text-gray-400\">No documentation found.</p>;\n};\n\nconst DocumentNotFound = memo(({ spriteUrl }: { spriteUrl: string }) => (\n  <div className=\"flex h-96 items-center justify-center\">\n    <div className=\"text-center\">\n      <div className=\"mb-4 text-red-400 dark:text-red-500\">\n        <SpriteIcon<IconName> spriteUrl={spriteUrl} iconId=\"CircleAlert\" className=\"mx-auto h-8 w-8\" />\n      </div>\n      <h3 className=\"mb-2 font-medium text-gray-900 text-lg dark:text-white\">Document not found</h3>\n      <p className=\"text-gray-500 dark:text-gray-400\">The selected document could not be loaded.</p>\n    </div>\n  </div>\n));\n\n// biome-ignore lint/suspicious/noExplicitAny: acceptable\nconst DocumentHeader = memo(({ frontmatter }: { frontmatter: Record<string, any> }) => (\n  <header className=\"mb-8\">\n    {frontmatter.title && <h1 className=\"mb-4 font-bold font-serif text-3xl text-gray-900 dark:text-white\">{frontmatter.title}</h1>}\n    {frontmatter.description && <p className=\"mb-4 font-serif text-gray-600 text-lg dark:text-gray-300\">{frontmatter.description}</p>}\n    {(frontmatter.formattedDate || frontmatter.version) && (\n      <div className=\"flex items-center justify-between text-gray-500 text-sm dark:text-gray-400\">\n        {frontmatter.formattedDate && (\n          <time className=\"font-sans\" dateTime={frontmatter.date}>\n            {frontmatter.formattedDate}\n          </time>\n        )}\n        {frontmatter.version && <span className=\"px-2 py-1 font-mono text-gray-300 text-xs italic dark:text-gray-600\">{frontmatter.version}</span>}\n      </div>\n    )}\n  </header>\n));\n\nconst DocList = memo(({ docs, selectedDoc, onDocSelect, spriteUrl }: { docs: EnhancedMarkdownMeta[]; selectedDoc: string | null; onDocSelect: (slug: string) => void; spriteUrl: string }) => {\n  // Group documents by folder and track which is first in each folder\n  const groupedDocs = useCallback(() => {\n    const groups: { [folder: string]: EnhancedMarkdownMeta[] } = {};\n\n    for (const doc of docs) {\n      const folder = doc.folder || '';\n      if (!groups[folder]) {\n        groups[folder] = [];\n      }\n      groups[folder].push(doc);\n    }\n\n    return groups;\n  }, [docs]);\n\n  const groups = groupedDocs();\n\n  return (\n    <div className=\"space-y-1\">\n      {Object.entries(groups).map(([folder, folderDocs]) => {\n        const isRootLevel = folder === '';\n        const folderId = `folder-${folder.replace(/[^a-zA-Z0-9]/g, '-')}`;\n\n        return (\n          <div key={folder || 'root'}>\n            {!isRootLevel && (\n              <div className=\"relative\">\n                <input type=\"checkbox\" id={folderId} className=\"peer hidden\" defaultChecked={true} />\n                <label htmlFor={folderId} className=\"flex w-full cursor-pointer items-center px-3 py-2 text-left text-gray-600 text-sm transition-colors hover:bg-gray-50 dark:text-gray-400 dark:hover:bg-gray-800/50\">\n                  <SpriteIcon<IconName> spriteUrl={spriteUrl} iconId=\"ChevronRight\" className=\"mr-2 h-3 w-3 transition-transform duration-200 peer-checked:rotate-90\" />\n                  <span className=\"font-medium capitalize\">{folder}</span>\n                </label>\n\n                <div className=\"ml-6 max-h-0 space-y-0.5 overflow-hidden transition-all duration-300 peer-checked:max-h-96\">\n                  {folderDocs.map(doc => (\n                    <button\n                      key={doc.slug}\n                      type=\"button\"\n                      onClick={() => onDocSelect(doc.slug)}\n                      className={clsx(\n                        'w-full px-3 py-2 text-left text-sm transition-colors focus:outline-none',\n                        selectedDoc === doc.slug\n                          ? 'border-blue-500 border-r-2 bg-blue-50 text-blue-900 dark:border-blue-400 dark:bg-blue-900/20 dark:text-blue-100'\n                          : 'text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800/50'\n                      )}\n                    >\n                      <div className=\"flex items-center\">\n                        <div className=\"flex-1\">\n                          <div className=\"font-medium\">{doc.title || doc.slug}</div>\n                        </div>\n                      </div>\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {isRootLevel && (\n              <div className=\"space-y-0.5\">\n                {folderDocs.map(doc => (\n                  <button\n                    key={doc.slug}\n                    type=\"button\"\n                    onClick={() => onDocSelect(doc.slug)}\n                    className={clsx(\n                      'w-full px-3 py-2 text-left text-sm transition-colors focus:outline-none',\n                      selectedDoc === doc.slug\n                        ? 'border-blue-500 border-r-2 bg-blue-50 text-blue-900 dark:border-blue-400 dark:bg-blue-900/20 dark:text-blue-100'\n                        : 'text-gray-700 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-800/50'\n                    )}\n                  >\n                    <div className=\"font-medium\">{doc.title || doc.slug}</div>\n                  </button>\n                ))}\n              </div>\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n});\n","import * as v from 'valibot';\nimport { ASSET_PREFIX } from './markdown-config';\n\n/**\n * Schema for validating document slugs\n * Allows: letters, numbers, hyphens, underscores, and forward slashes\n * Prevents: directory traversal attempts, leading/trailing slashes\n */\nconst documentSlugSchema = v.pipe(\n  v.string(),\n  v.trim(),\n  v.minLength(1, 'Slug cannot be empty'),\n  v.regex(/^[a-zA-Z0-9-_/]+$/, 'Slug can only contain letters, numbers, hyphens, underscores, and forward slashes'),\n  v.check(slug => !slug.includes('..'), 'Directory traversal not allowed'),\n  v.check(slug => !slug.startsWith('/'), 'Slug cannot start with forward slash'),\n  v.check(slug => !slug.endsWith('/'), 'Slug cannot end with forward slash')\n);\n\n/**\n * Validates and sanitizes a document slug\n * @param slug - The slug to validate\n * @returns Validated slug\n * @throws Response with 400 status if validation fails\n */\nexport function validateDocumentSlug(slug: unknown): string {\n  try {\n    return v.parse(documentSlugSchema, slug);\n  } catch (error) {\n    if (error instanceof v.ValiError) {\n      const message = error.issues[0]?.message || 'Invalid document url';\n      throw new Response(message, { status: 400 });\n    }\n    throw new Response('Invalid document slug', { status: 400 });\n  }\n}\n\n/**\n * Format the asset URL for fetching at runtime\n * @param filename - The filename to get the URL for\n * @param request - Optional request object for absolute URL generation\n * @param prefix - Optional alternate prefix to use instead of default\n * @returns Base URL where the file can be fetched at runtime (fetchContent will handle .gz fallback)\n */\nexport function formatAssetUrl(filename: string, request?: Request, prefix?: string): string {\n  // Use provided prefix or fall back to default fetch prefix\n  const fetchPrefix = prefix || ASSET_PREFIX.fetch;\n  const normalizedPrefix = fetchPrefix.endsWith('/') ? fetchPrefix.slice(0, -1) : fetchPrefix;\n  const url = `${normalizedPrefix}/${filename}`;\n  return request ? new URL(url, request.url).href : url;\n}\n","import type { Fetcher, GlobalManifest, MarkdownContent, MarkdownMeta } from './@types/markdown.types';\nimport { MARKDOWN_CONFIG } from './markdown-config';\nimport { formatAssetUrl } from './markdown-utils';\n\n// ============================================================================\n// CACHE MANAGEMENT\n// ============================================================================\n\n// In-memory caches for loaded data to avoid multiple file reads\nlet manifestCache: MarkdownMeta[] | null = null;\nlet globalManifestCache: GlobalManifest | null = null;\nlet contentCache: Record<string, MarkdownContent> | null = null;\nconst folderContentCache: Map<string, Record<string, MarkdownContent>> = new Map();\n\n// ============================================================================\n// CORE DATA FETCHING\n// ============================================================================\n\n/**\n * Fetch JSON content with smart compression fallback\n * @param url - The URL to fetch from (should be the base .json URL)\n * @param assets - Cloudflare ASSETS binding for static asset serving\n * @returns Parsed JSON content\n */\nasync function fetchContent<T>(url: string, assets: Fetcher): Promise<T> {\n  // Use ASSETS binding for internal asset fetching\n  const fetchFn = (input: RequestInfo | URL, init?: RequestInit) => assets.fetch(input, init);\n\n  // Determine URLs for both compressed and uncompressed versions\n  const baseUrl = url.endsWith('.gz') ? url.replace('.gz', '') : url;\n  const gzUrl = `${baseUrl}.gz`;\n\n  // Try compressed version first\n  try {\n    const gzResponse = await fetchFn(gzUrl);\n\n    if (gzResponse.ok) {\n      // Decompress using Web Streams API\n      const compressedData = await gzResponse.arrayBuffer();\n      const decompressedStream = new DecompressionStream('gzip');\n      const decompressedResponse = new Response(\n        new ReadableStream({\n          start(controller) {\n            controller.enqueue(new Uint8Array(compressedData));\n            controller.close();\n          },\n        }).pipeThrough(decompressedStream)\n      );\n\n      const decompressedText = await decompressedResponse.text();\n      const parsed = JSON.parse(decompressedText) as T;\n      return parsed;\n    }\n  } catch (_compressionError) {\n    // Compression attempt failed, fall back to uncompressed\n  }\n\n  // Fallback to uncompressed version\n  try {\n    const response = await fetchFn(baseUrl);\n\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n    }\n\n    const parsed = (await response.json()) as T;\n    return parsed;\n  } catch (uncompressedError) {\n    const errorMsg = `Failed to fetch both compressed (${gzUrl}) and uncompressed (${baseUrl}) versions: ${uncompressedError instanceof Error ? uncompressedError.message : 'Unknown error'}`;\n    throw new Error(errorMsg);\n  }\n}\n\n// ============================================================================\n// MANIFEST FUNCTIONS\n// ============================================================================\n\n/**\n * Get global manifest data which includes documents and chunking info\n */\nasync function getGlobalManifest(assets: Fetcher, request?: Request, prefix?: string): Promise<GlobalManifest> {\n  if (globalManifestCache) {\n    return globalManifestCache;\n  }\n\n  try {\n    const manifestUrl = formatAssetUrl(`${prefix || MARKDOWN_CONFIG.PREFIX}-manifest.json`, request);\n    const globalManifest = await fetchContent<GlobalManifest>(manifestUrl, assets);\n    globalManifestCache = globalManifest;\n    return globalManifest;\n  } catch (_error) {\n    return { documents: [], _buildMode: 'single' };\n  }\n}\n\n/**\n * Get markdown manifest data from generated JSON file\n * This reads from the consumer app's generated manifest file\n */\nexport async function getMarkdownManifest(assets: Fetcher, request?: Request, prefix?: string): Promise<MarkdownMeta[]> {\n  if (manifestCache) {\n    return manifestCache;\n  }\n\n  const globalManifest = await getGlobalManifest(assets, request, prefix);\n\n  // Filter out build metadata for runtime use\n  const cleanManifest = globalManifest.documents.map(({ _mtime, _size, ...item }) => item);\n\n  manifestCache = cleanManifest;\n  return cleanManifest;\n}\n\n// ============================================================================\n// CONTENT FUNCTIONS\n// ============================================================================\n\n/**\n * Get markdown content data from generated JSON file\n * This reads from the consumer app's generated content file or folder chunks\n */\nexport async function getMarkdownContent(assets: Fetcher, request?: Request, prefix?: string): Promise<Record<string, MarkdownContent>> {\n  const globalManifest = await getGlobalManifest(assets, request, prefix);\n\n  // In folder chunk mode, we don't preload all content\n  if (globalManifest._buildMode === 'chunked') {\n    return {};\n  }\n\n  if (contentCache) {\n    return contentCache;\n  }\n\n  try {\n    const contentUrl = formatAssetUrl(`${prefix || MARKDOWN_CONFIG.PREFIX}-content.json`, request);\n    const content = await fetchContent<Record<string, MarkdownContent>>(contentUrl, assets);\n    contentCache = content;\n    return content;\n  } catch (_error) {\n    return {};\n  }\n}\n\n/**\n * Load content for a specific folder (lazy loading)\n */\nasync function loadFolderContent(folder: string, assets: Fetcher, request?: Request, prefix?: string): Promise<Record<string, MarkdownContent>> {\n  // Check cache first\n  if (folderContentCache.has(folder)) {\n    const cachedContent = folderContentCache.get(folder);\n    if (cachedContent) {\n      return cachedContent;\n    }\n  }\n\n  try {\n    const folderKey = folder.replace(/[/\\\\]/g, '-');\n    const contentUrl = formatAssetUrl(`${prefix || MARKDOWN_CONFIG.PREFIX}-content-${folderKey}.json`, request);\n\n    const content = await fetchContent<Record<string, MarkdownContent>>(contentUrl, assets);\n    folderContentCache.set(folder, content);\n    return content;\n  } catch (_error) {\n    return {};\n  }\n}\n\n/**\n * Get a specific markdown document by slug\n */\nexport async function getMarkdownDocument(slug: string, assets: Fetcher, request?: Request, prefix?: string): Promise<MarkdownContent | null> {\n  const globalManifest = await getGlobalManifest(assets, request, prefix);\n\n  // In folder chunk mode, we need to determine which folder the document is in\n  if (globalManifest._buildMode === 'chunked') {\n    const manifest = await getMarkdownManifest(assets, request, prefix);\n    const docMeta = manifest.find(doc => doc.slug === slug);\n\n    if (!docMeta) {\n      return null;\n    }\n\n    // Documents without a folder are in the root folder\n    const folder = docMeta.folder || 'root';\n    const folderContent = await loadFolderContent(folder, assets, request, prefix);\n    return folderContent[slug] || null;\n  }\n\n  // Fallback to traditional mode\n  const content = await getMarkdownContent(assets, request, prefix);\n  return content[slug] || null;\n}\n\n// ============================================================================\n// UTILITY FUNCTIONS\n// ============================================================================\n\n/**\n * Clear the cache (useful for testing or hot reload)\n */\nexport function clearMarkdownCache(): void {\n  manifestCache = null;\n  globalManifestCache = null;\n  contentCache = null;\n  folderContentCache.clear();\n}\n\n/**\n * Check if a document exists by slug\n */\nexport async function hasMarkdownDocument(slug: string, assets: Fetcher, request?: Request, prefix?: string): Promise<boolean> {\n  const globalManifest = await getGlobalManifest(assets, request, prefix);\n\n  if (globalManifest._buildMode === 'chunked') {\n    const manifest = await getMarkdownManifest(assets, request, prefix);\n    return manifest.some(doc => doc.slug === slug);\n  }\n\n  const content = await getMarkdownContent(assets, request, prefix);\n  return slug in content;\n}\n"],"names":["groups"],"mappings":"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"}